<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,
               initial-scale=1,
               maximum-scale=1,
               user-scalable=no">

    <!--
        HTML5 Document Structure
        - Defines the document type and language
        - Viewport meta tag ensures proper mobile rendering and disables zoom
        - Character encoding set to UTF-8 for international character support
    -->

    <title>Product Listing - Wholesale Store</title>
    <!-- Page title for browser tab and search engine optimization -->

    <link rel="stylesheet" href="aproj.css">
    <!-- Link to external CSS stylesheet for visual styling -->

    <!--
        SheetJS ExcelJS Library
        - Used for creating and exporting Excel files with advanced formatting
        - Enables bill generation and export functionality
        - Version 4.4.0 loaded from CDN for optimal performance
    -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/exceljs/4.4.0/exceljs.min.js"></script>
</head>

<body>
    <div class="container">
        <header>
            <nav class="navbar">
                <div class="navbar-brand">
                    <!-- HEADER BOX -->
                    <div style="
        margin: 16px;
        padding: 18px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        border-radius: 14px;
        box-shadow: 0 6px 18px rgba(0,0,0,0.2);
        text-align: center;
        color: white;
    ">

                        <!-- FIXED POSITION TYPING TEXT -->
                        <div style="
            display: inline-block;
            
            width: 14ch;              /* üîí fixed width */
            text-align: left;
            font-size: 24px;
            font-weight: bold;
            letter-spacing: 1.2px;
        ">
                            <span style="
                display: inline-block;
                overflow: hidden;
                white-space: nowrap;
                width: 0;
                animation: typing 2s steps(200) infinite alternate;
            ">
                                BILLING-SYSTEM </span>
                        </div>

                        <!-- SUBTITLE -->
                        <div style="
            margin-top: 8px;
            font-size: 13px;
            opacity: 0.9;
            border: #eaeaea69 2px solid;
            border-width: 3px;
            padding: 4px 8px;
            background: #bfb1cd51;
            border-radius: 8px;
        ">
                            Bill's & Multi-Product Management
                        </div>
                    </div>

                    <!-- KEYFRAMES (INLINE, STILL HTML) -->
                    <style>
                        @keyframes typing {
                            from {
                                width: 0;
                            }

                            to {
                                width: 16ch;
                            }
                        }
                    </style>
                </div>
                <div class="navbar-search">
                    <input type="text" id="navbarSearchInput" placeholder="Search products...">
                    <button onclick="navbarSearch()">Search</button>
                </div>
                <div class="navbar-actions">
                    <button id="filterBtn" onclick="toggleFilter()" title="filterPanel">‚áå</button>
                    <button onclick="toggleCart()" title="Cart">üõí</button>
                    <button id="menuBtn" onclick="toggleMenu()" title="Menu">‚ò∞</button>

                    <!-- Menu Dropdown - Now inside header next to cart -->
                    <div class="menu-dropdown" id="menuDropdown" style="display: none;">
                        <button onclick="openAddModal(); toggleMenu();">‚ûïAdd Item</button>
                        <button onclick="toggleHistory(); toggleMenu();">üìãHistory</button>
                    </div>

                    <!-- Filter Panel moved here -->
                    <div class="filter-panel" id="filterPanel" style="display: none;">
                        <div class="filter-group">
                            <label>Category</label>
                            <select id="categoryFilter">
                                <option value="">All</option>
                                <option value="pouch">Pouch</option>
                                <option value="box">Box</option>
                                <option value="jar">Jar</option>
                                <option value="hanger">Hanger</option>
                            </select>
                        </div>

                        <div class="filter-group">
                            <label>Exact Weight (g)</label>
                            <input type="number" id="weightExact">
                        </div>

                        <div class="filter-group">
                            <label>MRP Under (‚Çπ)</label>
                            <input type="number" id="mrpUnder">
                        </div>

                        <div class="filter-actions">
                            <button onclick="applyFilters()">Apply</button>
                            <button onclick="clearFilters()">Clear</button>
                        </div>
                    </div>
                </div>
            </nav>
        </header>



        <div class="main-content">
            <div class="products-section">
                <div class="products-section">
                    <div class="products-grid" id="productsGrid"></div>
                    <div class="no-results" id="noResults" style="display: none;">
                        No products found matching your search.
                    </div>
                </div>

            </div>
        </div>

        <!-- Cart Overlay -->
        <div class="cart-overlay" id="cartOverlay" onclick="toggleCart()"></div>

        <!-- Cart Popup -->
        <div class="cart-section" id="cartSection">
            <button class="cart-close-btn" onclick="toggleCart()">‚úï</button>
            <h2>üõí Shopping Cart</h2>
            <div class="cart-items" id="cartItems">
                <div class="cart-empty">Your cart is empty</div>
            </div>
            <div class="cart-summary">
                <div class="summary-row">
                    <span>Subtotal (before discount):</span>
                    <span>‚Çπ<span id="subtotal">0.00</span></span>
                </div>
                <div class="summary-row discount">
                    <span>Total Discount (30%):</span>
                    <span>-‚Çπ<span id="totalDiscount">0.00</span></span>
                </div>
                <div class="summary-row total">
                    <span>Final Total:</span>
                    <span>‚Çπ<span id="finalTotal">0.00</span></span>
                </div>
            </div>
            <div class="cart-actions">
                <button class="export-btn" onclick="exportToExcel()">üìä Export Excel</button>
                <button class="save-bill-btn" onclick="saveBill()">üíæ Save Bill</button>
                <button class="clear-cart-btn" onclick="clearCart()">üóëÔ∏è Clear</button>
            </div>
        </div>

        <!-- History Overlay -->
        <div class="history-overlay" id="historyOverlay" onclick="toggleHistory()"></div>

        <!-- History Popup -->
        <div class="history-section" id="historySection">
            <button class="cart-close-btn" onclick="toggleHistory()">‚úï</button>
            <h2>üìã Bill History</h2>
            <div class="history-list" id="historyList">
                <div class="cart-empty">No bills saved yet</div>
            </div>
        </div>

        <!-- Product Edit/Add Modal -->
        <div class="modal-overlay" id="productModalOverlay" onclick="closeProductModal()"></div>
        <div class="modal-section" id="productModal">
            <button class="cart-close-btn" onclick="closeProductModal()">‚úï</button>
            <h2 id="modalTitle">Edit Product</h2>
            <form id="productForm" onsubmit="handleProductSubmit(event)">
                <input type="hidden" id="editProductId">

                <div class="form-group">
                    <label for="editName">Product Name</label>
                    <input type="text" id="editName" required placeholder="Enter product name">
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editMrp">MRP (‚Çπ)</label>
                        <input type="number" id="editMrp" required min="0" step="0.01">
                    </div>
                    <div class="form-group">
                        <label for="editWeight">Weight (g)</label>
                        <input type="number" id="editWeight" required min="0" step="0.01">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="editCategory">Category</label>
                        <select id="editCategory" required>
                            <option value="pouch">Pouch</option>
                            <option value="box">Box</option>
                            <option value="jar">Jar</option>
                            <option value="hanger">Hanger</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="editPieces">Pieces/Case</label>
                        <input type="number" id="editPieces" required min="1">

                    </div>
                </div>

                <div class="modal-actions">
                    <button type="button" class="delete-btn" id="deleteProductBtn" onclick="deleteCurrentProduct()"
                        style="display: none;">Delete</button>
                    <button type="submit" class="save-btn">Save Product</button>
                </div>
            </form>
        </div>

        <!-- Bill Detail Modal -->
        <div class="modal-overlay" id="billDetailOverlay" onclick="closeBillDetailModal()"></div>
        <div class="modal-section large-modal" id="billDetailModal">
            <button class="cart-close-btn" onclick="closeBillDetailModal()">‚úï</button>
            <h2 id="billDetailTitle">Bill Details</h2>
            <div id="billDetailContent"></div>
            <div class="modal-actions">
                <button class="export-btn" id="billDetailExportBtn">üìä Export Excel</button>
                <button class="delete-btn" id="billDetailDeleteBtn">üóëÔ∏è Delete Bill</button>
            </div>
        </div>

        <!-- FOOTER (NOW WILL SHOW 100%) -->
        <footer class="app-footer" id="appFooter">
            <span id="copyrightText"></span>

            <span class="footer-version">v1.0.1</span>
        </footer>



        <script src="aproj.js"></script>
</body>

</html>